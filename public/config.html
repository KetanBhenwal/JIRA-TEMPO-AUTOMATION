<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>AI Agent Config</title><style>body{font-family:system-ui,Arial,sans-serif;background:#f5f7fa;margin:0;padding:20px;max-width:900px}.navigation{background:#fff;padding:15px 25px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.navigation a{color:#0052cc;text-decoration:none;margin-right:20px;font-weight:500}.navigation a:hover{text-decoration:underline}.navigation a.active{color:#0747a6;border-bottom:2px solid #0052cc;padding-bottom:2px}h1{color:#0052cc;margin-top:0}.card{background:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:20px}label{display:block;font-weight:600;margin-top:14px;font-size:13px}input{width:100%;padding:10px;margin-top:4px;border:1px solid #dfe1e6;border-radius:6px;font-size:14px}small{color:#555;font-size:11px}button{background:#0052cc;color:#fff;border:none;padding:10px 18px;border-radius:4px;margin-top:18px;cursor:pointer}button.secondary{background:#6b778c}button.danger{background:#c9372c}button:disabled{background:#b3cdfb;cursor:not-allowed}.row{display:flex;gap:16px;flex-wrap:wrap}.col{flex:1;min-width:250px}.status{margin-top:16px;font-size:13px}.success{background:#e3fcef;color:#006644;padding:10px 14px;border-left:4px solid #36b37e;border-radius:4px}.error{background:#ffebe6;color:#ae2a19;padding:10px 14px;border-left:4px solid #ff5630;border-radius:4px}pre{background:#091e420f;padding:12px;border-radius:6px;font-size:12px;overflow:auto;max-height:300px}</style></head><body><!-- navigation injected by nav.js --><h1>AI Agent Runtime Config</h1><div class="card"><p>Edit runtime parameters. Leave a field blank to keep current. Values under 1000 for intervals are treated as minutes (auto-upconverted to ms).</p><div class="row"><div class="col"><label>Monitoring Interval (ms or minutes)</label><input id="monitoringInterval" placeholder="e.g. 300000 or 5"/></div><div class="col"><label>Work Session Threshold (ms or minutes)</label><input id="workSessionThreshold" placeholder="e.g. 900000 or 15"/></div></div><div class="row"><div class="col"><label>Auto Log Threshold (ms or minutes)</label><input id="autoLogThreshold" placeholder="e.g. 3600000 or 60"/></div><div class="col"><label>Max Session Duration (ms or minutes)</label><input id="maxSessionDuration" placeholder="e.g. 28800000 or 480"/></div></div><div class="row"><div class="col"><label>Work Hours Start (0-23)</label><input id="workHoursStart" placeholder="e.g. 9"/></div><div class="col"><label>Work Hours End (1-24)</label><input id="workHoursEnd" placeholder="e.g. 18"/></div></div><div class="row"><div class="col"><label>Default Meeting Issue Key</label><input id="defaultMeetingIssue" placeholder="e.g. TEAM-123"/><small>Used for all meeting sessions</small></div><div class="col"><label>Default Development Issue Key (Sprint Story)</label><input id="defaultDevelopmentIssue" placeholder="e.g. TEAM-456"/><small>Fallback when detection uncertain</small></div></div><button id="saveBtn">Save / Merge Overrides</button><button id="clearBtn" class="secondary">Clear Inputs</button><button id="resetBtn" class="danger">Reset Overrides</button><div id="status" class="status"></div></div><div class="card"><h2>Effective Config</h2><pre id="effective"></pre></div><script src="nav.js"></script><script>async function load(){const r=await fetch('/api/ai-agent/runtime-config');const j=await r.json();document.getElementById('effective').textContent=JSON.stringify(j.effective,null,2);}load();function val(id){const el=document.getElementById(id);if(!el) return null;const v=el.value.trim();if(id==='defaultMeetingIssue'||id==='defaultDevelopmentIssue'){return v===''?null:v;}return v===''?null:(isNaN(Number(v))?null:Number(v));}document.getElementById('saveBtn').onclick=async()=>{const body={};['monitoringInterval','workSessionThreshold','autoLogThreshold','maxSessionDuration','workHoursStart','workHoursEnd','defaultMeetingIssue','defaultDevelopmentIssue'].forEach(k=>{const v=val(k);if(v!=null) body[k]=v;});const res=await fetch('/api/ai-agent/runtime-config',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});const data=await res.json();const status=document.getElementById('status');if(res.ok){status.className='status success';status.textContent='✅ Updated';document.getElementById('effective').textContent=JSON.stringify(data.effective,null,2);}else{status.className='status error';status.textContent='❌ '+data.error;}};document.getElementById('clearBtn').onclick=()=>{['monitoringInterval','workSessionThreshold','autoLogThreshold','maxSessionDuration','workHoursStart','workHoursEnd','defaultMeetingIssue','defaultDevelopmentIssue'].forEach(k=>{const el=document.getElementById(k);if(el) el.value='';});document.getElementById('status').textContent='';};document.getElementById('resetBtn').onclick=async()=>{if(!confirm('Reset all overrides?')) return;const res=await fetch('/api/ai-agent/runtime-config',{method:'DELETE'});const data=await res.json();document.getElementById('effective').textContent=JSON.stringify(data.effective,null,2);const status=document.getElementById('status');status.className='status success';status.textContent='✅ Overrides cleared';};</script></body></html>